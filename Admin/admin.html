<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="admin.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
        integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="../jquery-3.7.1.min.js"></script>
    <script src="../angular.min.js"></script>
    <script src="admin.js" defer></script>

    <title>Trường Tiểu học tương lai</title>
</head>

<body ng-app="QLTruongTieuHocApp">
    <header class="navbar">
        <div class="logo">
            <i class="fa-solid fa-school"></i>
            <span>Hệ thống quản lý trường tiểu học</span>
        </div>
        <button class="logout-btn"><i class="fa-solid fa-arrow-right-from-bracket"></i><a
                href="..\XacThuc\dangnhap.html">Đăng xuất</a></button>
    </header>

    <nav class="menu">
        <button class="menu-btn active" data-target="overview">Tổng quan</button>
        <button class="menu-btn" data-target="student">Học sinh</button>
        <button class="menu-btn" data-target="class">Lớp học</button>
        <button class="menu-btn" data-target="teacher">Giáo viên</button>
        <button class="menu-btn" data-target="schedule">Lịch học</button>
        <button class="menu-btn" data-target="event">Sự kiện</button>
        <button class="menu-btn" data-target="report">Báo cáo</button>
    </nav>

    <main class="content">
        <!-- Tổng quan -->
        <section id="overview" class="page active">
            <div class="cards">
                <div class="card hocsinh">
                    <h3>Tổng học sinh</h3>
                    <img src="..\img\hocsinh.png" alt="anh">
                    <p class="number" id="totalStudents">0</p>
                    <span>+12 so với tháng trước</span>
                </div>
                <div class="card giaovien">
                    <h3>Giáo viên</h3>
                    <img src="..\img\giaovien.png" alt="anh">
                    <p class="number" id="totalTeachers">0</p>
                    <span>+2 so với tháng trước</span>
                </div>
                <div class="card lophoc">
                    <h3>Lớp học</h3>
                    <img src="..\img\lophoc.png" alt="anh">
                    <p class="number" id="totalClasses">0</p>
                    <span>Không thay đổi</span>
                </div>
                <div class="card chuyencan">
                    <img src="..\img\chuyencan.png" alt="anh">
                    <h3>Chuyên cần hôm nay</h3>
                    <p class="number" id="totalAttendance">0</p>
                    <span id="presentPercent">0% có mặt</span>
                </div>
            </div>

            <div class="recent-activity">
                <div class="recent-header">
                    <h2>Hoạt động gần đây</h2>
                    <h5>Các sự kiện và thông báo mới nhất</h5>
                </div>

                <div class="activity-item">
                    <div class="activity-info">
                        <p>Lớp 3A có 3 học sinh vắng mặt</p>
                        <span>10 phút trước</span>
                    </div>
                    <button class="tag tag-gray">Chuyên cần</button>
                </div>

                <div class="activity-item">
                    <div class="activity-info">
                        <p>Giáo viên Nguyễn Thị B đã cập nhật điểm lớp 5C</p>
                        <span>30 phút trước</span>
                    </div>
                    <button class="tag tag-outline">Học tập</button>
                </div>

                <div class="activity-item">
                    <div class="activity-info">
                        <p>Thêm mới học sinh Trần Văn D vào lớp 1B</p>
                        <span>1 giờ trước</span>
                    </div>
                    <button class="tag tag-black">Học sinh</button>
                </div>
            </div>
        </section>

        <!-- Học sinh -->
        <section id="student" class="page" ng-controller="StudentCtrl">
            <div class="student-header">
                <h3>Quản lý học sinh</h3>
                <span>Thêm, sửa, xóa và phân lớp học sinh</span>
                <div class="student-actions">
                    <input type="text" placeholder="Tìm kiếm học sinh hoặc phụ huynh..." ng-model="keyword"
                        ng-change="onKeywordChange()">

                    <select ng-model="selectedClass" ng-change="onClassChange()">
                        <option value="">Tất cả các lớp</option>
                        <option ng-repeat="c in classList" value="{{c}}">{{c}}</option>
                    </select>


                    <button class="add-btn" type="button" ng-click="openCreate()">
                        <i class="fa-solid fa-plus"></i>Thêm học sinh
                    </button>
                </div>

            </div>
            <!-- Form thêm học sinh -->
            <div class="overlay" id="overlay"></div>

            <div class="modal" id="studentModal">
                <div class="modal-header">
                    <h2>Thêm học sinh mới</h2>
                    <span class="close-btn" id="closeBtn">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin học sinh vào form bên dưới.</p>

                <form class="student-form" id="studentForm" ng-submit="createStudent($event)">
                    <div class="form-group">
                        <label>Họ tên</label>
                        <input type="text" id="studentName" ng-model="create.studentName">
                    </div>

                    <div class="form-group">
                        <label>Lớp</label>
                        <select id="studentClass" ng-model="create.className">
                            <option value="">Chọn lớp</option>
                            <option ng-repeat="c in classList" value="{{c}}">{{c}}</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Ngày sinh</label>
                        <input style="color: rgb(91, 91, 91);" type="date" id="studentDOB" ng-value="create.birthDate">
                    </div>

                    <div class="form-group">
                        <label>Phụ huynh</label>
                        <input type="text" id="studentParent" ng-model="create.parentName">
                    </div>

                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="text" id="studentPhone" ng-model="create.parentPhone">
                    </div>

                    <div class="form-group">
                        <label>Địa chỉ</label>
                        <input type="text" id="studentAddress" ng-model="create.parentAddress">
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submit-btn">Thêm mới</button>
                    </div>
                </form>

            </div>

            <div class="modal" id="studentModalUpdate">
                <div class="modal-header">
                    <h2>Sửa thông tin học sinh</h2>
                    <span class="close-btn" id="closeBtnUpdate">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin học sinh vào form bên dưới.</p>

                <form class="student-form" id="studentFormUpdate" ng-submit="updateStudent($event)">
                    <div class="form-group">
                        <label>Họ tên</label>
                        <input type="text" id="updateName" ng-model="update.studentName">
                    </div>

                    <div class="form-group">
                        <label>Lớp</label>
                        <select id="updateClass" ng-model="update.className">
                            <option value="">Chọn lớp</option>
                            <option ng-repeat="c in classList" value="{{c}}">{{c}}</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Ngày sinh</label>
                        <input style="color: rgb(91, 91, 91);" type="date" id="updateDOB" ng-value="update.birthDate">
                    </div>

                    <div class="form-group">
                        <label>Phụ huynh</label>
                        <input type="text" id="updateParent" ng-model="update.parentName">
                    </div>

                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="text" id="updatePhone" ng-model="update.parentPhone">
                    </div>

                    <div class="form-group">
                        <label>Địa chỉ</label>
                        <input type="text" id="updateAddress" ng-model="update.parentAddress">
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitUpdate-btn">Cập nhật</button>
                    </div>
                </form>
            </div>
            <div class="table-wrapper">
                <table class="student-table">
                    <thead>
                        <tr>
                            <th>Họ tên</th>
                            <th>Lớp</th>
                            <th>Ngày sinh</th>
                            <th>Phụ huynh</th>
                            <th>Số điện thoại</th>
                            <th>Địa chỉ</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="s in students">
                            <td>{{s.studentName}}</td>
                            <td>{{s.className}}</td>
                            <td>{{ formatDateVN(s.birthDate) }}</td>
                            <td>{{s.parentName}}</td>
                            <td>{{s.parentPhone}}</td>
                            <td>{{s.parentAddress}}</td>
                            <td>
                                <span class="status" ng-class="{'active': s.status==1, 'inactive': s.status!=1}">
                                    {{ s.status==1 ? 'Đang học' : 'Nghỉ học' }}
                                </span>
                            </td>
                            <td class="actions">
                                <button class="edit editStudent" type="button" ng-click="openUpdate(s)">
                                    <i class="fa-solid fa-pen-to-square"></i>
                                </button>
                                <button class="delete deleteStudent" type="button"
                                    ng-click="deleteStudent(s.studentID)">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                            </td>
                        </tr>

                        <tr ng-if="students.length===0">
                            <td colspan="8" style="text-align:center; padding:14px; color:#777;">Không có học sinh</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Các section khác -->
        <section id="class" class="page" ng-app="QLTruongTieuHocApp" ng-controller="ClassCtrl">
            <div class="class-header">
                <h3>Quản lý lớp học</h3>
                <span>Tạo lớp, cập nhật thông tin và gán giáo viên chủ nhiệm</span>

                <div class="class-actions">
                    <img src="..\img\hocsinh.png" alt="">
                    <h4 id="totalClass_Class">Tổng: 0 lớp</h4>

                    <img src="..\img\giaovien.png" alt="">
                    <h4 id="totalStudents_Class">Học sinh: 0 </h4>

                    <button class="addclass-btn" ng-click="openCreate()">
                        <i class="fa-solid fa-plus"></i>Tạo lớp mới
                    </button>
                </div>
            </div>

            <div class="table-class-wrapper">
                <table class="class-table">
                    <thead>
                        <tr>
                            <th>Tên lớp</th>
                            <th>Khối</th>
                            <th>GVCN</th>
                            <th>Sĩ số</th>
                            <th>Phòng học</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr ng-repeat="c in classes track by (c.classID || c.classId || c.id)">
                            <td>{{c.className}}</td>
                            <td>{{c.grade}}</td>
                            <td>{{c.gvcn}}</td>
                            <td>{{c.numberOfStudents}}</td>
                            <td>{{c.classroom}}</td>
                            <td>
                                <span class="status activeclass">{{c.status || 'Hoạt động'}}</span>
                            </td>
                            <td class="actions">
                                <button class="edit editClass" ng-click="openUpdate(c)">
                                    <i class="fa-solid fa-pen-to-square"></i>
                                </button>
                            </td>
                        </tr>
                        <tr ng-if="classes.length===0">
                            <td colspan="8" style="text-align:center; padding:14px; color:#777;">Không có lớp học</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- overlay -->
            <div class="overlayclass" id="overlayclass"></div>

            <!-- MODAL CREATE -->
            <div class="modal" id="classModal">
                <div class="modal-header">
                    <h2>Tạo lớp mới</h2>
                    <span class="close-btn" id="closeClassBtn">&times;</span>
                </div>

                <p class="modal-desc">Nhập thông tin lớp học vào form bên dưới.</p>

                <form class="class-form" ng-submit="createClass()">
                    <div class="form-group">
                        <label>Tên lớp</label>
                        <input type="text" ng-model="formCreate.className">
                    </div>

                    <div class="form-group">
                        <label>Khối</label>
                        <select ng-model="formCreate.grade">
                            <option value="">Chọn khối</option>
                            <option>Khối 1</option>
                            <option>Khối 2</option>
                            <option>Khối 3</option>
                            <option>Khối 4</option>
                            <option>Khối 5</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>GVCN</label>
                        <select ng-model="formCreate.gvcn">
                            <option value="">Chọn giáo viên</option>
                            <option ng-repeat="t in teachers" value="{{t.fullName}}">
                                {{t.fullName}}
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Sĩ số tối đa</label>
                        <input type="number" ng-model="formCreate.numberOfStudents">
                    </div>

                    <div class="form-group">
                        <label>Phòng học</label>
                        <input type="text" ng-model="formCreate.classroom">
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitClass-btn">Thêm mới</button>
                    </div>
                </form>
            </div>

            <!-- MODAL UPDATE -->
            <div class="modal" id="classModalUpdate">
                <div class="modal-header">
                    <h2>Sửa thông tin lớp</h2>
                    <span class="close-btn" id="closeClassBtnUpdate">&times;</span>
                </div>

                <p class="modal-desc">Nhập thông tin lớp học vào form bên dưới.</p>

                <form class="class-form" ng-submit="updateClass()">
                    <div class="form-group">
                        <label>Tên lớp</label>
                        <input type="text" ng-model="formUpdate.className">
                    </div>

                    <div class="form-group">
                        <label>Khối</label>
                        <select ng-model="formUpdate.grade">
                            <option value="">Chọn khối</option>
                            <option>Khối 1</option>
                            <option>Khối 2</option>
                            <option>Khối 3</option>
                            <option>Khối 4</option>
                            <option>Khối 5</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>GVCN</label>
                        <select ng-model="formUpdate.gvcn">
                            <option value="">Chọn giáo viên</option>
                            <option ng-repeat="t in teachers" value="{{t.fullName}}">
                                {{t.fullName}}
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Sĩ số tối đa</label>
                        <input type="number" ng-model="formUpdate.numberOfStudents">
                    </div>

                    <div class="form-group">
                        <label>Phòng học</label>
                        <input type="text" ng-model="formUpdate.classroom">
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitClassUpdate-btn">Cập nhật</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="teacher" class="page" ng-controller="TeacherCtrl">
            <div class="class-header">
                <h3>Quản lý giáo viên</h3>
                <span>TThêm, sửa, xóa giáo viên và phân công lớp</span>
                <div class="class-actions">
                    <img src="..\img\hocsinh.png" alt="">
                    <h4 id="totalTeacher_Teacher">Tổng: 0 giáo viên</h4>
                    <button class="addteacher-btn" ng-click="openCreateTeacher()">
                        <i class="fa-solid fa-plus"></i>Thêm giáo viên
                    </button>
                </div>
            </div>
            <div id="overlayteacher" class="overlayteacher"></div>

            <!-- Modal thêm giáo viên -->
            <div class="modal" id="teacherModal">
                <div class="modal-header">
                    <h2>Thêm giáo viên mới</h2>
                    <span class="close-btn" id="closeTeacherBtn">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin giáo viên và phân công lớp.</p>

                <form class="teacher-form" id="teacherForm" ng-submit="createTeacher()">
                    <div class="form-group">
                        <label>Họ tên</label>
                        <input type="text" id="teacherName" placeholder="">
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="teacherEmail" placeholder="">
                    </div>

                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="text" id="teacherSDT" placeholder="">
                    </div>

                    <div class="form-group">
                        <label>Môn dạy</label>
                        <select id="teacherSubject">
                            <option value="">Chọn môn dạy</option>
                            <option ng-repeat="s in subjects" value="{{s.subjectName}}">
                                {{s.subjectName}}
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Lớp dạy</label>
                        <div class="checkbox-group" id="teacherClass">
                            <label ng-repeat="c in classList">
                                <input type="checkbox" value="{{c.className}}"> {{c.className}}
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Chủ nhiệm</label>
                        <input id="checkbox-chunhiem" class="teacherCN" type="checkbox">
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitTeacher-btn">Thêm mới</button>
                    </div>
                </form>
            </div>
            <div class="modal" id="teacherModalUpdate">
                <div class="modal-header">
                    <h2>Sửa thông tin giáo viên</h2>
                    <span class="close-btn" id="closeTeacherBtnUpdate">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin giáo viên và phân công lớp.</p>

                <form class="teacher-form" id="teacherFormUpdate" ng-submit="updateTeacher()">
                    <div class="form-group">
                        <label>Họ tên</label>
                        <input type="text" id="teacherNameUpdate">
                    </div>

                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="teacherEmailUpdate">
                    </div>

                    <div class="form-group">
                        <label>Số điện thoại</label>
                        <input type="text" id="teacherSDTUpdate">
                    </div>

                    <div class="form-group">
                        <label>Môn dạy</label>
                        <select id="teacherSubjectUpdate">
                            <option value="">Chọn môn dạy</option>
                            <option ng-repeat="s in subjects" value="{{s.subjectName}}">
                                {{s.subjectName}}
                            </option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Lớp dạy</label>
                        <div class="checkbox-group" id="teacherClassUpdate">
                            <label ng-repeat="c in classList">
                                <input type="checkbox" value="{{c.className}}"> {{c.className}}
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Chủ nhiệm</label>
                        <input id="checkbox-chunhiem" class="teacherCNUpdate" type="checkbox">
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitTeacherUpdate-btn">Cập nhật</button>
                    </div>
                </form>
            </div>
            <div class="table-teacher-wrapper">
                <table class="class-table">
                    <thead>
                        <tr>
                            <th>Họ tên</th>
                            <th>Email</th>
                            <th>Số điện thoại</th>
                            <th>Môn dạy</th>
                            <th>Lớp dạy</th>
                            <th>Chủ nhiệm</th>
                            <th>Trạng thái</th>
                            <th>Thao tác</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="t in teachers track by (t.teacherID || t.teacherId || t.id)">
                            <td>{{t.fullName}}</td>
                            <td>{{t.email}}</td>
                            <td>{{t.phone}}</td>
                            <td>{{t.specialization}}</td>
                            <td>
                                <span class="status activeclass1"
                                    ng-repeat="cn in (t.classNames || []) track by $index">
                                    {{cn}}
                                </span>
                            </td>
                            <td><span class="status activeclass">{{t.isCN ? 'Có' : 'Không'}}</span></td>
                            <td><span class="status activeclass">Hoạt động</span></td>
                            <td class="actions">
                                <button class="edit editTeacher" ng-click="openUpdateTeacher(t)">
                                    <i class="fa-solid fa-pen-to-square"></i>
                                </button>
                                <button class="delete deleteTeacher" ng-click="deleteTeacher(t)">
                                    <i class="fa-solid fa-trash-can"></i>
                                </button>
                            </td>
                        </tr>
                        <tr ng-if="teachers.length===0">
                            <td colspan="8" style="text-align:center; padding:14px; color:#777;">Không có giáo viên</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
        <section id="schedule" class="page" ng-controller="ScheduleCtrl">
            <div class="schedule-header">
                <h3>Quản lý lịch học</h3>
                <span>Quản lý thời khóa biểu theo tuần cho từng lớp học</span>

                <div class="schedule-actions">
                    <h5>Chọn lớp: </h5>
                    <select ng-model="selectedClassName" ng-options="c.className as c.className for c in classList"
                        ng-change="onChangeClass()">
                        <option value="">Tất cả các lớp</option>
                    </select>
                    <img src="..\img\lichhoc.png" alt="">
                    <h4 id="totalSchedule_Schedule">0 tiết/tuần</h4>
                    <button class="addschedule-btn" ng-click="openCreateSchedule()">
                        <i class="fa-solid fa-plus"></i>Thêm tiết học
                    </button>
                </div>
            </div>
            <div id="overlaySchedule" class="overlaySchedule"></div>

            <div class="modal" id="scheduleModal">
                <div class="modal-header">
                    <h2>Thêm tiết học mới</h2>
                    <span class="close-btn" id="closeScheduleBtn">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin tiết học vào form bên dưới.</p>

                <form class="schedule-form" id="scheduleForm" ng-submit="createSchedule($event)">
                    <div class="form-group">
                        <label>Lớp</label>
                        <select id="schedule-Class" ng-model="createModel.className"
                            ng-options="c.className as c.className for c in classList" required>
                            <option value="">Chọn lớp</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Thứ</label>
                        <select id="schedule-dayofweek" ng-model="createModel.dayOfWeek"
                            ng-options="d.value as d.label for d in dayOfWeekList" required>
                            <option value="">Chọn thứ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tiết</label>
                        <select id="schedule-lesson" ng-model="createModel.period"
                            ng-options="p.value as p.label for p in periodList" required>
                            <option value="">Chọn tiết</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Môn học</label>
                        <select id="schedule-subject" ng-model="createModel.subjectName"
                            ng-options="s.subjectName as s.subjectName for s in subjects" required>
                            <option value="">Chọn môn học</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Giáo viên</label>
                        <select ng-model="createModel.teacherName"
                            ng-options="t.fullName as t.fullName for t in teachers" required>
                            <option value="">Chọn giáo viên</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Phòng học</label>
                        <input id="schedule-addroom" type="text" ng-model="createModel.room" placeholder="Ví dụ: P101"
                            required>
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitSchedule-btn">Thêm tiết học</button>
                    </div>
                </form>
            </div>
            <div class="modal" id="scheduleModalUpdate">
                <div class="modal-header">
                    <h2>Sửa tiết học</h2>
                    <span class="close-btn" id="closeScheduleBtnUpdate">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin tiết học vào form bên dưới.</p>

                <form class="schedule-form" id="scheduleFormUpdate" ng-submit="updateSchedule($event)">
                    <div class="form-group">
                        <label>Lớp</label>
                        <select id="schedule-ClassUpdate" ng-model="updateModel.className"
                            ng-options="c.className as c.className for c in classList" required>
                            <option value="">Chọn lớp</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Thứ</label>
                        <select id="schedule-dayofweekUpdate" ng-model="updateModel.dayOfWeek"
                            ng-options="d.value as d.label for d in dayOfWeekList" required>
                            <option value="">Chọn thứ</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tiết</label>
                        <select id="schedule-lessonUpdate" ng-model="updateModel.period"
                            ng-options="p.value as p.label for p in periodList" required>
                            <option value="">Chọn tiết</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Môn học</label>
                        <select id="schedule-subjectUpdate" ng-model="updateModel.subjectName"
                            ng-options="s.subjectName as s.subjectName for s in subjects" required>
                            <option value="">Chọn môn học</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Giáo viên</label>
                        <select ng-model="updateModel.teacherName"
                            ng-options="t.fullName as t.fullName for t in teachers" required>
                            <option value="">Chọn giáo viên</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Phòng học</label>
                        <input id="schedule-roomUpdate" type="text" ng-model="updateModel.room"
                            placeholder="Ví dụ: P101" required>
                    </div>

                    <div class="form-footer">
                        <button type="submit" class="submitScheduleUpdate-btn">Cập nhật</button>
                    </div>
                </form>
            </div>
            <table class="schedule-table">
                <thead>
                    <tr>
                        <th>Tiết</th>
                        <th>Thứ 2</th>
                        <th>Thứ 3</th>
                        <th>Thứ 4</th>
                        <th>Thứ 5</th>
                        <th>Thứ 6</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="p in periodList">
                        <td>
                            Tiết {{p.value}}<br>
                            <small>{{p.time}}</small>
                        </td>

                        <td ng-repeat="d in dayOfWeekList">
                            <div class="schedule-lesson" ng-if="getCell(d.value, p.value)">
                                <strong>{{getCell(d.value, p.value).subjectName}}</strong>
                                <div class="schedule-teacher">{{getCell(d.value, p.value).teacherName}}</div>
                                <span class="badge schedule-room">{{getCell(d.value, p.value).room}}</span>

                                <div class="schedule-table-actions">
                                    <button class="editschedule"
                                        ng-click="openUpdateSchedule(getCell(d.value, p.value))">
                                        <i class="fa-solid fa-pen-to-square"></i>
                                    </button>
                                    <button class="deleteschedule" ng-click="deleteSchedule(getCell(d.value, p.value))">
                                        <i class="fa-solid fa-trash-can"></i>
                                    </button>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>
        <section id="event" class="page" ng-controller="EventCtrl">
            <div class="event-header">
                <h3>Quản lý sự kiện & lịch học</h3>
                <span>Tạo và quản lý các sự kiện, lịch thi, lịch họp</span>
                <div class="event-actions">
                    <img src="../img/hocsinh.png" alt="">
                    <h4 id="totalEvent_Event">Tổng: 0 sự kiện</h4>
                    <img src="../img/giaovien.png" alt="">
                    <h4 id="upcomingEvent_Event">Sắp tới: 0</h4>
                    <button class="addevent-btn" ng-click="openCreateEvent()">
                        <i class="fa-solid fa-plus"></i>Thêm sự kiện
                    </button>
                </div>
            </div>
            <div id="overlayevent" class="overlayevent"></div>
            <div class="modal" id="eventModal">
                <div class="modal-header">
                    <h2>Thêm sự kiện mới</h2>
                    <span class="close-btn" id="closeEventBtn">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin sự kiện vào form bên dưới.</p>
                <form class="event-form" id="eventForm" ng-submit="createEvent($event)">
                    <div class="form-group">
                        <label for="event-name">Tên</label>
                        <input type="text" id="event-name" placeholder="">
                    </div>
                    <div class="form-group">
                        <label for="event-description">Mô tả</label>
                        <textarea id="event-description" rows="3" placeholder=""></textarea>
                    </div>
                    <div class="form-group">
                        <label for="event-date">Ngày</label>
                        <input type="text" id="event-date" placeholder="dd/mm/yyyy">
                    </div>
                    <div class="form-group">
                        <label for="event-time">Giờ</label>
                        <input type="text" id="event-time" placeholder="--:-- --">
                    </div>
                    <div class="form-group">
                        <label>Loại</label>
                        <div class="event-type">
                            <div><input type="radio" name="typeCreate" value="Học thuật"> <span>Học thuật</span></div>
                            <div><input type="radio" name="typeCreate" value="Kiểm tra"> <span>Kiểm tra</span></div>
                            <div><input type="radio" name="typeCreate" value="Nghỉ lễ"> <span>Nghỉ lễ</span></div>
                            <div><input type="radio" name="typeCreate" value="Họp"> <span>Họp</span></div>
                            <div><input type="radio" name="typeCreate" value="Khác"> <span>Khác</span></div>
                        </div>
                    </div>
                    <div class="form-footer">
                        <button type="submit" class="addEvent-btn">Thêm mới</button>
                    </div>
                </form>
            </div>
            <div class="modal" id="eventModalUpdate">
                <div class="modal-header">
                    <h2>Sửa sự kiện</h2>
                    <span class="close-btn" id="closeEventBtnUpdate">&times;</span>
                </div>
                <p class="modal-desc">Nhập thông tin sự kiện vào form bên dưới.</p>
                <form class="event-form" id="eventFormUpdate" ng-submit="updateEvent($event)">
                    <div class="form-group">
                        <label for="event-name">Tên</label>
                        <input type="text" id="event-nameUpdate" placeholder="">
                    </div>
                    <div class="form-group">
                        <label for="event-description">Mô tả</label>
                        <textarea id="event-descriptionUpdate" rows="3" placeholder=""></textarea>
                    </div>
                    <div class="form-group">
                        <label for="event-date">Ngày</label>
                        <input type="text" id="event-dateUpdate" placeholder="dd/mm/yyyy">
                    </div>
                    <div class="form-group">
                        <label for="event-time">Giờ</label>
                        <input type="text" id="event-timeUpdate" placeholder="--:-- --">
                    </div>
                    <div class="form-group">
                        <label>Loại</label>
                        <div class="event-typeUpdate">
                            <div><input type="radio" name="typeUpdate" value="Học thuật"> <span>Học thuật</span></div>
                            <div><input type="radio" name="typeUpdate" value="Kiểm tra"> <span>Kiểm tra</span></div>
                            <div><input type="radio" name="typeUpdate" value="Nghỉ lễ"> <span>Nghỉ lễ</span></div>
                            <div><input type="radio" name="typeUpdate" value="Họp"> <span>Họp</span></div>
                            <div><input type="radio" name="typeUpdate" value="Khác"> <span>Khác</span></div>
                        </div>
                    </div>
                    <div class="form-footer">
                        <button type="submit" class="addEventUpdate-btn">Cập nhật</button>
                    </div>
                </form>
            </div>
            <div class="event-list">
                <div class="listevent" ng-repeat="e in events" ng-class="getEventCardClass(e)">
                    <div class="event-content">
                        <div class="eventlist-header">
                            <h3>{{e.title}}</h3>
                            <!-- TAG loại -->
                            <span class="tag" ng-class="getTagClass(e.eventType)">
                                {{e.eventType}}
                            </span>
                            <!-- STATUS -->
                            <span class="status" ng-class="getStatusClass(e)">
                                {{ getStatusText(e) }}
                            </span>
                        </div>
                        <p>{{e.description}}</p>
                        <div class="eventlist-footer">
                            <i class="fa-regular fa-calendar"></i>
                            <span>{{ formatDate(e.eventDate) }}</span>
                            <i class="fa-regular fa-clock"></i>
                            <span>{{ formatTime(e.eventTime) }}</span>
                        </div>
                    </div>
                    <div class="eventlist-actions">
                        <button class="edit editEvent" ng-click="openUpdateEvent(e)">
                            <i class="fa-regular fa-pen-to-square"></i>
                        </button>
                        <button class="delete deleteEvent" ng-click="deleteEvent(e)">
                            <i class="fa-regular fa-trash-can"></i>
                        </button>
                    </div>
                </div>
                <div ng-if="events.length===0">
                    <p style="text-align:center; padding-top:14px; color:#777;">Không có sự kiện</p>
                </div>
            </div>
        </section>
        <section id="report" class="page">
            <div class="report-top">
                <div class="report-top-header">
                    <h3>Báo cáo tổng hợp</h3>
                    <span>Chọn lớp và thời gian để tạo báo cáo</span>
                </div>

                <div class="report-filters">
                    <div class="filter-group">
                        <label for="report-filters-class">Lớp</label>
                        <select id="report-filters-class">
                            <option>Tất cả các lớp</option>
                            <option>1A</option>
                            <option>1B</option>
                            <option>2E</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="from-date">Từ ngày</label>
                        <input type="date" id="from-date" value="2025-08-01">
                    </div>

                    <div class="filter-group">
                        <label for="to-date">Đến ngày</label>
                        <input type="date" id="to-date" value="2025-09-01">
                    </div>

                    <div class="filter-buttons">
                        <button class="btn-pdf">
                            <i class="fa-regular fa-file-pdf"></i> PDF
                        </button>
                        <button class="btn-excel">
                            <i class="fa-solid fa-download"></i> Excel
                        </button>
                    </div>
                </div>
            </div>
            <div class="cards-baocao">
                <div class="card-baocao tonghocsinh">
                    <h3>Tổng học sinh</h3>
                    <img src="..\img\tonghocsinh.png" alt="anh">
                    <p class="number" id="totalStudents_report">0</p>
                    <span>Trên tất cả lớp</span>
                </div>
                <div class="card-baocao chuyencanTB">
                    <h3>Chuyên cần TB</h3>
                    <img src="..\img\chuyencantb.png" alt="anh">
                    <p class="number" id="totalAttendance_report">0</p>
                    <span>+0.3 so với tháng trước</span>
                </div>
                <div class="card-baocao hoclucgioi">
                    <h3>Học lực giỏi</h3>
                    <img src="..\img\hoclucgioi.png" alt="anh">
                    <p class="number">21.1%</p>
                    <span>45/228 học sinh</span>
                </div>
                <div class="card-baocao cancaithien">
                    <h3>Cần cải thiện</h3>
                    <img src="..\img\cancaithien.png" alt="anh">
                    <p class="number">5.6%</p>
                    <span>12/228 học sinh</span>
                </div>
            </div>
            <div class="chuyencan-hocluc">
                <div class="chuyencantheolop">
                    <h3>Chuyên cần theo lớp</h3>
                    <span>Tình hình có mặt, vắng mặt và đi muộn</span>
                    <table class="chuyencantheolop-table">
                        <thead>
                            <tr>
                                <th>Lớp</th>
                                <th class="comat">Có mặt</th>
                                <th class="vang">Vắng</th>
                                <th class="muon">Đi muộn</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1A</td>
                                <td>33</td>
                                <td>2</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>1B</td>
                                <td>31</td>
                                <td>3</td>
                                <td>2</td>
                            </tr>
                            <tr>
                                <td>1C</td>
                                <td>29</td>
                                <td>2</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>1D</td>
                                <td>32</td>
                                <td>1</td>
                                <td>0</td>
                            </tr>
                            <tr>
                                <td>2A</td>
                                <td>31</td>
                                <td>2</td>
                                <td>1</td>
                            </tr>
                            <tr>
                                <td>2B</td>
                                <td>34</td>
                                <td>1</td>
                                <td>1</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="phanbohocluc">
                    <h3>Phân bố học lực</h3>
                    <span>Tỷ lệ học sinh theo từng mức học lực</span>
                    <table class="phanbohocluc-table">
                        <thead>
                            <tr>
                                <th>Xếp loại</th>
                                <th>Tỉ lệ (%)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="gioi">
                                <td>Giỏi</td>
                                <td>21%</td>
                            </tr>
                            <tr class="kha">
                                <td>Khá</td>
                                <td>42%</td>
                            </tr>
                            <tr class="trungbinh">
                                <td>Trung bình</td>
                                <td>31%</td>
                            </tr>
                            <tr class="yeu">
                                <td>Yếu</td>
                                <td>6%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="xuhuongchuyencan">
                <h3>Xu hướng chuyên cần theo tháng</h3>
                <span>Tỷ lệ chuyên cần trung bình các tháng trong năm học</span>
                <table class="xuhuongchuyencan-table">
                    <thead>
                        <tr>
                            <th>Tháng</th>
                            <th>Tỉ lệ chuyên cần (%)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>T9</td>
                            <td>94%</td>
                        </tr>
                        <tr>
                            <td>T10</td>
                            <td>95%</td>
                        </tr>
                        <tr>
                            <td>T11</td>
                            <td>93%</td>
                        </tr>
                        <tr>
                            <td>T12</td>
                            <td>94%</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="baocaochitiet">
                <h3>Báo cáo chi tiết theo lớp</h3>
                <span>Chi tiết chuyên cần và học lực từng lớp</span>
                <div class="baocaochitiet-lops">
                    <div class="chitietlop">
                        <div class="lop-left">
                            <button class="lop-btn">1A</button>
                            <div class="lop-info">
                                <p><b>Sĩ số: 36</b></p>
                                <span>Có mặt: 32 | Vắng: 3 | Muộn: 1</span>
                            </div>
                        </div>
                        <div class="lop-right">
                            <h3>88.9%</h3>
                            <span>Chuyên cần</span>
                        </div>
                    </div>

                    <div class="chitietlop">
                        <div class="lop-left">
                            <button class="lop-btn">1B</button>
                            <div class="lop-info">
                                <p><b>Sĩ số: 36</b></p>
                                <span>Có mặt: 30 | Vắng: 4 | Muộn: 2</span>
                            </div>
                        </div>
                        <div class="lop-right">
                            <h3>88.9%</h3>
                            <span>Chuyên cần</span>
                        </div>
                    </div>

                    <div class="chitietlop">
                        <div class="lop-left">
                            <button class="lop-btn">1C</button>
                            <div class="lop-info">
                                <p><b>Sĩ số: 31</b></p>
                                <span>Có mặt: 28 | Vắng: 2 | Muộn: 1</span>
                            </div>
                        </div>
                        <div class="lop-right">
                            <h3>88.9%</h3>
                            <span>Chuyên cần</span>
                        </div>
                    </div>

                    <div class="chitietlop">
                        <div class="lop-left">
                            <button class="lop-btn">2A</button>
                            <div class="lop-info">
                                <p><b>Sĩ số: 32</b></p>
                                <span>Có mặt: 32 | Vắng: 0 | Muộn: 0</span>
                            </div>
                        </div>
                        <div class="lop-right">
                            <h3>100%</h3>
                            <span>Chuyên cần</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <!-- Toast Notification -->
    <div id="toastContainer"></div>
</body>

</html>